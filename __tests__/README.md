# Тесты для Yokai Dashboard

## Структура тестов

Текущий набор тестов покрывает основные компоненты и функциональность:

### Component Tests (`__tests__/components/`)
- `yokai-card.test.tsx` - Тесты компонента карточки духа:
  - ✅ Отображение всех полей (Имя, Уровень угрозы, Локация, Статус)
  - ✅ Кнопка Capture и её состояния
  - ✅ Обработка ошибок с уведомлениями
  - ✅ Отображение цветов для уровней угрозы
  
- `yokai-list.test.tsx` - Тесты компонента списка:
  - ✅ Отображение списка карточек
  - ✅ Состояния загрузки и ошибок
  - ✅ Обработка пустого списка

### Hook Tests (`__tests__/hooks/`)
- `use-yokai-sse.test.tsx` - Тесты SSE хука:
  - ✅ Подключение к SSE endpoint
  - ✅ Обновление кэша при получении обновлений
  - ✅ Обработка ошибок подключения
  - ✅ Закрытие соединения при размонтировании

## Запуск тестов

```bash
# Все тесты
npm test

# В режиме watch
npm run test:watch

# С покрытием
npm run test:coverage
```

## Покрытие требований ТЗ

✅ **Список аномалий** - тесты проверяют отображение всех полей (имя, уровень угрозы, локация, статус)  
✅ **Кнопка Capture** - тесты проверяют наличие, функциональность и состояния кнопки  
✅ **Real-time обновления** - тесты проверяют SSE подключение и обновления кэша  
✅ **Обработка ошибок** - тесты проверяют отображение ошибок и уведомлений  
✅ **Состояния загрузки** - тесты проверяют корректное отображение состояний загрузки

**Статус**: 18 тестов проходят успешно ✅

